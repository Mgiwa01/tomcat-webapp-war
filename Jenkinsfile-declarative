pipeline {

  agent any
  
  tools
  {
    maven 'maven3'
  }
  
  triggers{
    pollSCM('* * * * *')
    // githubPush(repository: 'SHLLC-Class/tomcat-webapp-war', branches: 'dev')
  }
  
  options{
    timestamps()
    buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '2', daysToKeepStr: '', numToKeepStr: '2'))
  }
  
  stages{
    
    stage('1. clone')
    {
       steps{
           git branch: 'dev', changelog: false, poll: false, url: 'https://github.com/SHLLC-Class/tomcat-webapp-war'
       }
    }
    
    stage('2. Build')
    {
      steps{
	      sh "mvn clean package"
	    }
    }
   
    stage('3. ExecuteSonarQubeReport')
    {
      steps{
	      sh "mvn sonar:sonar"
	    }
    }
   
    stage('4. UploadArtifactintoNexus')
    {
      steps{
	      sh "mvn deploy"
	    }
    }
    
  }
  
}
